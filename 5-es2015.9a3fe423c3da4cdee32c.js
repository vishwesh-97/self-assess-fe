(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"9zb2":function(t,e,s){"use strict";s.r(e),s.d(e,"AssessmentModule",(function(){return X}));var n=s("ofXK"),i=s("tyNb"),o=s("3Pt+"),a=s("fXoL"),c=s("t6gY"),r=s("jhN1"),b=s("b6Qw"),l=s("5eHb"),d=s("EtQq");const u=["closeModalBtn"],m=function(t){return["/assessment/start/",t]};function g(t,e){if(1&t&&(a.Pb(0,"li",27),a.oc(1),a.Ob()),2&t){const t=e.$implicit;a.ec("routerLink",a.gc(2,m,t.id)),a.zb(1),a.qc(" ",t.name||"NA"," ")}}function h(t,e){if(1&t&&(a.Nb(0),a.Pb(1,"ul",25),a.nc(2,g,2,4,"li",26),a.Ob(),a.Mb()),2&t){const t=a.bc();a.zb(2),a.ec("ngForOf",t.assessmentList)}}function p(t,e){1&t&&(a.Nb(0),a.Pb(1,"p",28),a.oc(2,"Add assessment by clicking on Add New button!"),a.Ob(),a.Mb())}function f(t,e){1&t&&(a.Pb(0,"button",29),a.oc(1,"ADD NEW"),a.Ob())}function O(t,e){if(1&t&&(a.Pb(0,"li",33),a.oc(1),a.Pb(2,"footer",34),a.oc(3),a.cc(4,"date"),a.Ob(),a.Pb(5,"footer",35),a.Pb(6,"b"),a.oc(7,"Tone"),a.Ob(),a.oc(8),a.Ob(),a.Ob()),2&t){const t=e.$implicit;a.zb(1),a.qc(" ",t.text," "),a.zb(2),a.pc(a.dc(4,3,t.created_at,"medium")),a.zb(5),a.qc(": ",t.tone||"NA","")}}function v(t,e){if(1&t&&(a.Pb(0,"div",30),a.Pb(1,"ul",31),a.nc(2,O,9,6,"li",32),a.Ob(),a.Ob()),2&t){const t=a.bc();a.zb(2),a.ec("ngForOf",t.tweetList)}}function w(t,e){if(1&t&&(a.Pb(0,"form",36),a.Pb(1,"div",1),a.Pb(2,"div",37),a.oc(3," Name: "),a.Lb(4,"input",38),a.Ob(),a.Pb(5,"div",39),a.oc(6," Days: "),a.Lb(7,"input",40),a.Ob(),a.Ob(),a.Ob()),2&t){const t=a.bc();a.ec("formGroup",t.newAssessmentForm)}}let P=(()=>{class t{constructor(t,e,s,n,i,o,a,c){this.route=t,this.router=e,this.http=s,this.titleService=n,this.cookieService=i,this.formBuilder=o,this.elementRef=a,this.toastr=c,this.assessmentList=null,this.loading=!1,this.userData=null,this.tweetList=null}ngOnInit(){this.getAssessmentList(),this.getTweets(),this.newAssessmentForm=this.formBuilder.group({name:[null,o.n.required],days:[null,o.n.required]}),this.userData=JSON.parse(localStorage.getItem("user_data"))}ngAfterViewInit(){this.elementRef.nativeElement.ownerDocument.body.style.backgroundColor="lightgray"}getAssessmentList(){this.http.get("all-assessments").subscribe(t=>{this.assessmentList=t},t=>{console.log(t)})}getTweets(){this.http.get("cbc-tweets").subscribe(t=>{this.tweetList=t.tweets})}addNew(){this.userData&&this.userData.user_id&&(this.loading=!0,this.http.post("user-assessment",{user:this.userData.user_id,name:this.newAssessmentForm.value.name,total_days:this.newAssessmentForm.value.days}).subscribe(t=>{console.log(t),this.loading=!1,this.closeBtn.nativeElement.click(),this.toastr.success("","Assessment created!",{timeOut:3e3}),this.getAssessmentList()},t=>{console.log(t),this.loading=!1}))}closeModal(){this.newAssessmentForm.reset()}}return t.\u0275fac=function(e){return new(e||t)(a.Kb(i.a),a.Kb(i.b),a.Kb(c.a),a.Kb(r.c),a.Kb(b.a),a.Kb(o.b),a.Kb(a.l),a.Kb(l.b))},t.\u0275cmp=a.Eb({type:t,selectors:[["app-assessment-management"]],viewQuery:function(t,e){var s;1&t&&a.tc(u,!0),2&t&&a.hc(s=a.Yb())&&(e.closeBtn=s.first)},decls:35,vars:6,consts:[[1,"container"],[1,"row"],[1,"col-md-8"],[1,"main-div","card","container-fluid"],[1,"card-body"],[1,"title"],[1,"int-list-div"],[4,"ngIf"],[1,"add-btn-div"],["class","btn btn-dark add-btn","data-toggle","modal","data-target","#addAssessmentModal",4,"ngIf"],[1,"col-md-4"],[1,"main-div","card","container-fluid",2,"width","380px"],[1,"title-cbc"],["class","mt-2",4,"ngIf"],["id","addAssessmentModal","tabindex","-1","data-backdrop","static","data-keyboard","false","aria-labelledby","addAssessmentModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","addAssessmentModalLabel",1,"modal-title"],[1,"modal-body"],[3,"formGroup",4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary","btn-sm","modal-btn",3,"click"],["closeModalBtn",""],["type","button",1,"btn","btn-primary","btn-sm","modal-btn",3,"disabled","click"],[1,"list-group","list-group-flush","int-list"],["class","list-group-item","style","background: black; color: white;","routerLinkActive","router-link-active",3,"routerLink",4,"ngFor","ngForOf"],["routerLinkActive","router-link-active",1,"list-group-item",2,"background","black","color","white",3,"routerLink"],[1,"no-assessment"],["data-toggle","modal","data-target","#addAssessmentModal",1,"btn","btn-dark","add-btn"],[1,"mt-2"],[1,"list-group","list-group-flush","tweet-list"],["class","list-group-item tweet-item",4,"ngFor","ngForOf"],[1,"list-group-item","tweet-item"],[2,"font-size","10px","float","right"],[2,"font-size","12px","float","left"],[3,"formGroup"],[1,"col-md-12",2,"padding","0 40px 10px 40px"],["formControlName","name","type","text","placeholder","name of the Assessment","pattern","^\\S*$",1,"form-control"],[1,"col-md-12","mt-3",2,"padding","0 40px 30px 40px"],["formControlName","days","type","number","placeholder","number of days for the Assessment","pattern","^\\S*$",1,"form-control"]],template:function(t,e){1&t&&(a.Pb(0,"div",0),a.Lb(1,"app-navbar"),a.Pb(2,"div",1),a.Pb(3,"div",2),a.Pb(4,"div",3),a.Pb(5,"div",4),a.Pb(6,"h3",5),a.oc(7,"My Assessment"),a.Ob(),a.Pb(8,"div",6),a.nc(9,h,3,1,"ng-container",7),a.nc(10,p,3,0,"ng-container",7),a.Ob(),a.Pb(11,"div",8),a.nc(12,f,2,0,"button",9),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Pb(13,"div",10),a.Pb(14,"div",11),a.Pb(15,"div",4),a.Pb(16,"h3",12),a.oc(17,"CBCHealth News"),a.Ob(),a.Pb(18,"small"),a.oc(19,"Latest tweets by CBCHealth"),a.Ob(),a.nc(20,v,3,1,"div",13),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Pb(21,"div",14),a.Pb(22,"div",15),a.Pb(23,"div",16),a.Pb(24,"div",17),a.Pb(25,"h5",18),a.oc(26,"New Assessment"),a.Ob(),a.Ob(),a.Pb(27,"div",19),a.nc(28,w,8,1,"form",20),a.Ob(),a.Pb(29,"div",21),a.Pb(30,"button",22,23),a.Xb("click",(function(){return e.closeModal()})),a.oc(32,"Close"),a.Ob(),a.Pb(33,"button",24),a.Xb("click",(function(){return e.addNew()})),a.oc(34,"Save"),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob()),2&t&&(a.zb(9),a.ec("ngIf",e.assessmentList&&e.assessmentList.length>0),a.zb(1),a.ec("ngIf",e.assessmentList&&0===e.assessmentList.length),a.zb(2),a.ec("ngIf",e.assessmentList&&0===e.assessmentList.length),a.zb(8),a.ec("ngIf",e.tweetList),a.zb(8),a.ec("ngIf",e.newAssessmentForm),a.zb(5),a.ec("disabled",e.loading||e.newAssessmentForm.invalid))},directives:[d.a,n.j,n.i,i.d,i.c,o.p,o.g,o.d,o.a,o.f,o.c,o.k,o.j],pipes:[n.d],styles:[".main-div[_ngcontent-%COMP%]{max-width:650px;margin:150px auto auto;border-radius:10px;box-shadow:0 2px 12px rgba(0,0,0,.4)}.title[_ngcontent-%COMP%]{font-weight:600;margin:10px 0 30px;text-align:center}.title-cbc[_ngcontent-%COMP%]{font-weight:600;margin:10px 0 0}.int-list-div[_ngcontent-%COMP%]{margin:0;max-height:200px;overflow:auto}.list-group-item[_ngcontent-%COMP%]{border-radius:5px;text-align:center;font-weight:500}.add-btn-div[_ngcontent-%COMP%]{margin:20px auto;text-align:center}.add-btn[_ngcontent-%COMP%]{background-color:#000;padding:8px 15px;font-size:14px;font-weight:500;border-radius:5px}.int-list[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{background-color:#f5f5f5;cursor:pointer}p.no-assessment[_ngcontent-%COMP%]{margin-bottom:0;text-align:center;font-weight:500}.modal-btn[_ngcontent-%COMP%]{border-radius:5px;background-color:#000;font-weight:500}ul.tweet-list[_ngcontent-%COMP%]{overflow:auto;max-height:350px!important}li.tweet-item[_ngcontent-%COMP%]{font-weight:500!important;text-align:initial!important;font-size:14px!important;padding:5px!important}"]}),t})(),x=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Eb({type:t,selectors:[["app-assessment"]],decls:1,vars:0,template:function(t,e){1&t&&a.Lb(0,"router-outlet")},directives:[i.g],styles:[""]}),t})();const y=["closeModalBtn"];function L(t,e){1&t&&(a.Nb(0),a.Pb(1,"div",22),a.oc(2," No records found. "),a.Ob(),a.Mb())}function A(t,e){1&t&&(a.Nb(0),a.Pb(1,"b"),a.oc(2,"Status"),a.Ob(),a.oc(3,": Complete"),a.Lb(4,"br"),a.Mb())}function M(t,e){1&t&&(a.Nb(0),a.Pb(1,"b"),a.oc(2,"Status"),a.Ob(),a.oc(3,": Incomplete"),a.Lb(4,"br"),a.Mb())}function k(t,e){if(1&t){const t=a.Qb();a.Pb(0,"li",25),a.Pb(1,"div",15),a.Pb(2,"div",26),a.Pb(3,"b"),a.oc(4,"Name"),a.Ob(),a.oc(5),a.Lb(6,"br"),a.nc(7,A,5,0,"ng-container",4),a.nc(8,M,5,0,"ng-container",4),a.Pb(9,"b"),a.oc(10,"Remaining days"),a.Ob(),a.oc(11),a.Lb(12,"br"),a.Pb(13,"b"),a.oc(14,"Created on"),a.Ob(),a.oc(15),a.cc(16,"date"),a.Lb(17,"br"),a.Ob(),a.Pb(18,"div",27),a.Pb(19,"a",28),a.Xb("click",(function(){a.ic(t);const s=e.$implicit;return a.bc(2).downloadReport(s.id)})),a.oc(20,"Download"),a.Pb(21,"span"),a.ac(),a.Pb(22,"svg",29),a.Lb(23,"path",30),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Zb(),a.Pb(24,"div",31),a.Pb(25,"a",32),a.Xb("click",(function(){a.ic(t);const s=e.$implicit;return a.bc(2).setCurrentAssessment(s.id)})),a.oc(26,"Share"),a.Pb(27,"span"),a.ac(),a.Pb(28,"svg",33),a.Lb(29,"path",34),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob()}if(2&t){const t=e.$implicit;a.zb(5),a.qc(": ",t.name,""),a.zb(2),a.ec("ngIf",t.end_datetime),a.zb(1),a.ec("ngIf",!t.end_datetime),a.zb(3),a.qc(": ",t.total_days-t.completed_days,""),a.zb(4),a.qc(": ",a.dc(16,5,t.created_date,"mediumDate"),"")}}function C(t,e){if(1&t&&(a.Pb(0,"ul",23),a.nc(1,k,30,8,"li",24),a.Ob()),2&t){const t=a.bc();a.zb(1),a.ec("ngForOf",t.assessmentList)}}function I(t,e){1&t&&(a.Pb(0,"div",35),a.Pb(1,"small",36),a.oc(2,"*You can download or share your assessment report by clicking 'Download' or 'Share'"),a.Ob(),a.Ob())}const z=function(){return["/assessment"]};let _=(()=>{class t{constructor(t,e,s){this.elementRef=t,this.http=e,this.toastr=s,this.assessmentList=null,this.toEmail=null,this.emailAssessmentId=null}ngOnInit(){this.getAssessmentList()}ngAfterViewInit(){this.elementRef.nativeElement.ownerDocument.body.style.backgroundColor="lightgray"}getAssessmentList(){this.http.get("all-assessments").subscribe(t=>{this.assessmentList=t,console.log(t)},t=>{console.log(t)})}downloadReport(t){t&&this.http.getFile("generate-report/"+t).subscribe(t=>{var e=window.URL.createObjectURL(t),s=document.createElement("a");s.href=e,s.download="report.pdf",document.body.appendChild(s),s.click(),s.remove()},t=>{console.log(t)})}shareReport(){this.emailAssessmentId&&this.toEmail&&this.http.get("share-report/"+this.emailAssessmentId,{email:this.toEmail}).subscribe(t=>{console.log(t),this.closeModal(),this.closeBtn.nativeElement.click(),this.toastr.success("","Email sent!",{timeOut:3e3})},t=>{console.log(t)})}setCurrentAssessment(t){this.emailAssessmentId=t}closeModal(){this.toEmail=null,this.emailAssessmentId=null}}return t.\u0275fac=function(e){return new(e||t)(a.Kb(a.l),a.Kb(c.a),a.Kb(l.b))},t.\u0275cmp=a.Eb({type:t,selectors:[["app-history"]],viewQuery:function(t,e){var s;1&t&&a.tc(y,!0),2&t&&a.hc(s=a.Yb())&&(e.closeBtn=s.first)},decls:29,vars:7,consts:[[1,"container"],[1,"main-div","card","container-fluid"],[1,"card-body"],[1,"title"],[4,"ngIf"],["class","list-group list-group-flush",4,"ngIf"],[1,"text-center","mt-3"],["routerLinkActive","router-link-active","type","button",1,"btn","btn-dark","add-btn",3,"routerLink"],["class","text-center mt-4",4,"ngIf"],["id","addEmailModal","tabindex","-1","data-backdrop","static","data-keyboard","false","aria-labelledby","addEmailModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","addEmailModalLabel",1,"modal-title"],[1,"modal-body"],[1,"row"],[1,"col-md-12",2,"padding","0 40px 10px 40px"],["type","email","placeholder","recipient email","pattern","^\\S*$",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary","btn-sm","modal-btn",3,"click"],["closeModalBtn",""],["type","button",1,"btn","btn-primary","btn-sm","modal-btn",3,"disabled","click"],[1,"text-center"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[1,"col-md-7"],[1,"col-md-3"],["href","javascript:void(0)",2,"font-weight","500","text-decoration","none",3,"click"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-cloud-download-fill",2,"margin-left","5px"],["fill-rule","evenodd","d","M8 0a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 4.095 0 5.555 0 7.318 0 9.366 1.708 11 3.781 11H7.5V5.5a.5.5 0 0 1 1 0V11h4.188C14.502 11 16 9.57 16 7.773c0-1.636-1.242-2.969-2.834-3.194C12.923 1.999 10.69 0 8 0zm-.354 15.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 14.293V11h-1v3.293l-2.146-2.147a.5.5 0 0 0-.708.708l3 3z"],[1,"col-md-2"],["href","javascript:void(0)","data-toggle","modal","data-target","#addEmailModal",2,"font-weight","500","text-decoration","none",3,"click"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-envelope-fill",2,"margin-left","5px"],["fill-rule","evenodd","d","M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555zM0 4.697v7.104l5.803-3.558L0 4.697zM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757zm3.436-.586L16 11.801V4.697l-5.803 3.546z"],[1,"text-center","mt-4"],[2,"font-weight","500"]],template:function(t,e){1&t&&(a.Pb(0,"div",0),a.Lb(1,"app-navbar"),a.Pb(2,"div",1),a.Pb(3,"div",2),a.Pb(4,"h3",3),a.oc(5,"History"),a.Ob(),a.nc(6,L,3,0,"ng-container",4),a.nc(7,C,2,1,"ul",5),a.Pb(8,"div",6),a.Pb(9,"a",7),a.oc(10,"BACK"),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.nc(11,I,3,0,"div",8),a.Ob(),a.Pb(12,"div",9),a.Pb(13,"div",10),a.Pb(14,"div",11),a.Pb(15,"div",12),a.Pb(16,"h5",13),a.oc(17,"Share via email"),a.Ob(),a.Ob(),a.Pb(18,"div",14),a.Pb(19,"div",15),a.Pb(20,"div",16),a.oc(21," Email: "),a.Pb(22,"input",17),a.Xb("ngModelChange",(function(t){return e.toEmail=t})),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Pb(23,"div",18),a.Pb(24,"button",19,20),a.Xb("click",(function(){return e.closeModal()})),a.oc(26,"Close"),a.Ob(),a.Pb(27,"button",21),a.Xb("click",(function(){return e.shareReport()})),a.oc(28,"Save"),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Ob()),2&t&&(a.zb(6),a.ec("ngIf",e.assessmentList&&0===e.assessmentList.length),a.zb(1),a.ec("ngIf",e.assessmentList),a.zb(2),a.ec("routerLink",a.fc(6,z)),a.zb(2),a.ec("ngIf",e.assessmentList),a.zb(11),a.ec("ngModel",e.toEmail),a.zb(5),a.ec("disabled",!e.toEmail))},directives:[d.a,n.j,i.e,i.d,o.a,o.k,o.f,o.h,n.i],pipes:[n.d],styles:[".main-div[_ngcontent-%COMP%]{max-width:800px;margin:150px auto auto;border-radius:10px;box-shadow:0 2px 12px rgba(0,0,0,.4)}.title[_ngcontent-%COMP%]{font-weight:600;margin:10px 0 30px;text-align:center}.add-btn[_ngcontent-%COMP%]{background-color:#000;padding:8px 15px;font-size:14px;font-weight:500;border-radius:5px}ul.list-group[_ngcontent-%COMP%]{max-height:350px;overflow:auto}.modal-btn[_ngcontent-%COMP%]{border-radius:5px;background-color:#000;font-weight:500}"]}),t})();function D(t,e){if(1&t){const t=a.Qb();a.Pb(0,"div",7),a.Pb(1,"div"),a.Pb(2,"p",8),a.oc(3,"No Questions remaining for today."),a.Ob(),a.Ob(),a.Pb(4,"button",9),a.Xb("click",(function(){return a.ic(t),a.bc().goToAssessmentList()})),a.oc(5,"BACK"),a.Ob(),a.Ob()}}function Q(t,e){if(1&t){const t=a.Qb();a.Pb(0,"button",20),a.Xb("click",(function(){return a.ic(t),a.bc(2).saveAnswer()})),a.oc(1,"NEXT"),a.Ob()}if(2&t){const t=a.bc(2);a.ec("disabled",0==t.selectedAnswer)}}function N(t,e){if(1&t){const t=a.Qb();a.Pb(0,"button",20),a.Xb("click",(function(){return a.ic(t),a.bc(2).saveAnswer(!0)})),a.oc(1,"FINISH"),a.Ob()}if(2&t){const t=a.bc(2);a.ec("disabled",0==t.selectedAnswer)}}function E(t,e){if(1&t){const t=a.Qb();a.Nb(0),a.Pb(1,"h4",10),a.oc(2),a.Ob(),a.Pb(3,"div",11),a.Pb(4,"p",12),a.oc(5),a.Ob(),a.Ob(),a.Pb(6,"div",13),a.Pb(7,"select",14),a.Xb("ngModelChange",(function(e){return a.ic(t),a.bc().selectedAnswer=e})),a.Pb(8,"option",15),a.oc(9,"Select answer"),a.Ob(),a.Pb(10,"option",16),a.oc(11,"Yes"),a.Ob(),a.Pb(12,"option",17),a.oc(13,"No"),a.Ob(),a.Ob(),a.Ob(),a.Pb(14,"div",18),a.nc(15,Q,2,1,"button",19),a.nc(16,N,2,1,"button",19),a.Lb(17,"br"),a.Ob(),a.Mb()}if(2&t){const t=a.bc();a.zb(2),a.rc("Question ",t.currentQueIndex+1," of ",t.queList.length,""),a.zb(3),a.pc(t.currentQue.que_text),a.zb(2),a.ec("ngModel",t.selectedAnswer),a.zb(8),a.ec("ngIf",!t.showFinish),a.zb(1),a.ec("ngIf",t.showFinish)}}function q(t,e){if(1&t&&(a.Pb(0,"p",21),a.oc(1),a.Lb(2,"br"),a.oc(3),a.cc(4,"date"),a.Ob()),2&t){const t=a.bc();a.zb(1),a.qc("Day ",t.currentDayCount," of Assessment"),a.zb(2),a.qc(" ",a.dc(4,2,t.today,"mediumDate")," ")}}function F(t,e){if(1&t&&(a.Pb(0,"p",21),a.oc(1),a.cc(2,"date"),a.Ob()),2&t){const t=a.bc();a.zb(1),a.qc(" ",a.dc(2,1,t.today,"mediumDate")," ")}}const S=[{path:"",component:x,children:[{path:"",component:P},{path:"start/:id",component:(()=>{class t{constructor(t,e,s,n,i){this.elementRef=t,this.route=e,this.http=s,this.router=n,this.toastr=i,this.assessmentData={},this.userData=null,this.queList=[],this.currentQue=null,this.selectedAnswer=0,this.showFinish=!1,this.currentDayCount=null,this.today=null,this.userData=JSON.parse(localStorage.getItem("user_data"))}ngOnInit(){this.route.snapshot.params.hasOwnProperty("id")&&(this.assessmentData.id=this.route.snapshot.params.id,this.getAssessmentData(this.assessmentData.id)),this.today=new Date}ngAfterViewInit(){this.elementRef.nativeElement.ownerDocument.body.style.backgroundColor="lightgray"}getAssessmentData(t){this.http.get("user-assessment/"+t).subscribe(t=>{console.log(t),this.assessmentData=t,this.currentDayCount=parseInt(this.assessmentData.completed_days)+1,console.log("daycount:",this.currentDayCount),this.getQuestions(this.assessmentData.id)},t=>{console.log(t)})}getQuestions(t){this.userData&&this.userData.user_id&&t&&this.http.post("today-questions",{user:this.userData.user_id,assessment:this.assessmentData.id}).subscribe(t=>{console.log(t),this.queList=t,this.setQue(this.queList)},t=>{console.log(t),t.error.submitted_msg&&this.toastr.error(t.error.submitted_msg[0],"Error!",{timeOut:5e3})})}setQue(t){t.length>0&&(this.currentQueIndex=0,this.currentQue=t[this.currentQueIndex],1==t.length&&(this.showFinish=!0))}saveAnswer(t=!1){let e=new Date,s={user:this.userData.user_id,assessment:this.assessmentData.id,question:this.currentQue.id,answer:parseInt(this.selectedAnswer),answer_datetime:e};this.http.post("user-answer",s).subscribe(e=>{console.log(e),t?this.updateAssessment(this.assessmentData.id):(this.currentQueIndex=this.currentQueIndex+1,this.currentQue=this.queList[this.currentQueIndex],this.selectedAnswer=0,this.currentQueIndex===this.queList.length-1&&(this.showFinish=!0))},t=>{console.log(t)})}updateAssessment(t){let e=parseInt(this.assessmentData.completed_days)+1;this.http.patch("user-assessment/"+t,{completed_days:e}).subscribe(t=>{console.log(t),this.toastr.success("You assessment is submitted.","Submitted!",{timeOut:5e3}),this.goToAssessmentList()},t=>{console.log(t)})}goToAssessmentList(){this.router.navigateByUrl("/assessment")}changeQue(){}}return t.\u0275fac=function(e){return new(e||t)(a.Kb(a.l),a.Kb(i.a),a.Kb(c.a),a.Kb(i.b),a.Kb(l.b))},t.\u0275cmp=a.Eb({type:t,selectors:[["app-start-assessment"]],decls:9,vars:4,consts:[[1,"container"],[1,"main-div","card","container-fluid"],[1,"card-body"],["class","text-center",4,"ngIf"],[4,"ngIf"],[1,"mt-5",2,"display","flex","justify-content","center"],["class","text-center","style","font-weight: 400;",4,"ngIf"],[1,"text-center"],[1,"mt-5","mb-5",2,"font-weight","500"],[1,"btn","btn-dark","add-btn","mt-3",3,"click"],[1,"title"],[1,"que-div"],[2,"font-weight","500"],[1,"mb-3","mt-0","select-div"],["id","inputGroupSelect01","placeholder","select answer",1,"custom-select",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","2"],[1,"next-btn-div"],["class","btn btn-dark add-btn",3,"disabled","click",4,"ngIf"],[1,"btn","btn-dark","add-btn",3,"disabled","click"],[1,"text-center",2,"font-weight","400"]],template:function(t,e){1&t&&(a.Pb(0,"div",0),a.Lb(1,"app-navbar"),a.Pb(2,"div",1),a.Pb(3,"div",2),a.nc(4,D,6,0,"div",3),a.nc(5,E,18,6,"ng-container",4),a.Ob(),a.Ob(),a.Pb(6,"div",5),a.nc(7,q,5,5,"p",6),a.nc(8,F,3,4,"p",6),a.Ob(),a.Ob()),2&t&&(a.zb(4),a.ec("ngIf",!e.currentQue),a.zb(1),a.ec("ngIf",e.currentQue),a.zb(2),a.ec("ngIf",e.currentQue&&e.currentDayCount),a.zb(1),a.ec("ngIf",!e.currentQue))},directives:[d.a,n.j,o.m,o.f,o.h,o.i,o.o],pipes:[n.d],styles:[".main-div[_ngcontent-%COMP%]{max-width:600px;margin:150px auto auto;border-radius:10px;box-shadow:0 2px 12px rgba(0,0,0,.4)}.title[_ngcontent-%COMP%]{text-align:center}.next-btn-div[_ngcontent-%COMP%]{float:right}.add-btn[_ngcontent-%COMP%]{background-color:#000;padding:8px 15px;font-size:14px;font-weight:500;border-radius:5px}.que-div[_ngcontent-%COMP%]{text-align:center;margin-top:30px}.select-div[_ngcontent-%COMP%]{display:flex;justify-content:center}.custom-select[_ngcontent-%COMP%]{max-width:150px}"]}),t})()},{path:"history",component:_}]}];let K=(()=>{class t{}return t.\u0275mod=a.Ib({type:t}),t.\u0275inj=a.Hb({factory:function(e){return new(e||t)},imports:[[i.f.forChild(S)],i.f]}),t})();var B=s("PCNd");let X=(()=>{class t{}return t.\u0275mod=a.Ib({type:t}),t.\u0275inj=a.Hb({factory:function(e){return new(e||t)},imports:[[n.b,K,B.a,o.e,o.l]]}),t})()}}]);